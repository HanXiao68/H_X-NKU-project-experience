### 非线性最小二乘的求解
g2o 和 ceres（谷歌的） 求解最小二乘  

利用舒尔补利用slam问题的稀疏性求解。把信息矩阵归成2*2 的矩阵。再变成下三角的形式。

### 步骤
1.构建误差函数  r ij
2.对误差函数中的状态量进行雅克比求解--》可以构建成一个信息矩阵--》LM求解

#### 求解中的trick
1.信息矩阵 H不满秩
    1.使用LM泛，加阻尼因子可以使得系统满秩，可求解，但是求解结果可能会往零空间变化。（vins中使用了）
2.OKVIS  中 加了先验约束。

orbslam  svo等求mono BA问题时，fix一个相机pose 和一个特征点，或者fix两个相机pose，为了限定优化值不乱飘。怎么实现。。
### 单目BA 
核心问题：矩阵块的对应关系，拼接信息矩阵。
相机 6n  +3m （m是路标点）
### 代码讲解：类似于g20
    顶点：相机，landmark，
            id, 维度，矩阵，index     变量加法。
    边：或叫残差。
        残差计算。
        和哪些顶点相连
        雅克比矩阵计算
        
    求解器：
            用LM算法  vinsmono中用的dogleg算法
            得到H     b
            线性求解器： QR，  SVD    PCG
            
            
            
            
##   滑动窗口关键步骤：
    1.构建先验
    2.先验 + 新测量信息  -》新的信息矩阵
        
滑动窗口如何更新先验残差？
    目的：

#### vinsmono中的滑动窗口算法
    当滑动窗口中第二帧是关键帧，就marg最老的帧，及其路标点。
     。。。。。。。。不是关键帧，则丢弃这一帧上的视觉信息。他的iMU预积分继续传给下一帧。
     
     margination  和estimate
